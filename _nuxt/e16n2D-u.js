import{_ as U}from"./BIRqQLeT.js";import{_ as V}from"./DGbdwtZV.js";import{g as N,r as b,j as S,k as I,z as M,c as a,b as y,a as i,w as m,G as g,E as k,H as x,m as n,a9 as A,F as C,n as w,M as E,I as s,o as u,d as O,t as B,O as z}from"#entry";import{E as D,i as F,T as P,a as j}from"./B4tRxEfj.js";import{_ as G}from"./DlAUqK2U.js";const J={class:"info-style"},K=["value"],q=["value"],Q={class:"img-style"},W=["src"],X={key:1},Y={class:"info-text"},Z={key:0,class:"info-editor"},h=["disabled"],_=["disabled"],tt=["disabled"],nt=["disabled"],et=N({__name:"create",async setup(ot){let v,$;const l=b({}),{type:H,out:T}=([v,$]=S(()=>$fetch("/api/products/params")),v=await v,$(),v),e=b(null);I(()=>{e.value=new D({extensions:[F,P.configure({table:{resizable:!0}})],content:""})}),M(()=>{e.value?.destroy()});let d;const c=b(null),L=r=>{const t=r.target;if(d=Array.from(t.files)||[],d.length){const p=d[0],f=new FileReader;f.onload=o=>{c.value=o.target?.result},f.readAsDataURL(p)}},R=()=>{l.value.html=e.value.getHTML();const r=new FormData;d?.length&&r.append("img",d[0]),r.append("data",JSON.stringify(l.value)),$fetch("/api/products",{method:"POST",body:r}),z("/lk/products")};return(r,t)=>{const p=U,f=V;return u(),a(C,null,[y(f,null,{top:m(()=>t[36]||(t[36]=[i("h1",{class:"edit-prod"},"Редактировать продукт",-1)])),default:m(()=>[y(p,{to:"/lk/products/create",class:"btn"},{default:m(()=>t[37]||(t[37]=[O("Добавить")])),_:1})]),_:1}),i("div",J,[g(i("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>n(l).name=o),class:"info-prod",placeholder:"name"},null,512),[[x,n(l).name]]),g(i("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>n(l).title=o),class:"info-prod",placeholder:"title"},null,512),[[x,n(l).title]]),g(i("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>n(l).type_id=o),onChange:t[3]||(t[3]=o=>n(l).out_id=null),class:"info-prod"},[(u(!0),a(C,null,w(n(H),o=>(u(),a("option",{key:o.id,value:o.id,class:"info-prod"},B(o.name),9,K))),128))],544),[[A,n(l).type_id]]),n(l).type_id==4?g((u(),a("select",{key:0,"onUpdate:modelValue":t[4]||(t[4]=o=>n(l).out_id=o),class:"info-prod"},[t[38]||(t[38]=i("option",{value:null},"Без номера выпуска",-1)),(u(!0),a(C,null,w(n(T),o=>(u(),a("option",{key:o.id,value:o.id},B(o.name),9,q))),128))],512)),[[A,n(l).out_id]]):k("",!0),i("div",Q,[t[39]||(t[39]=i("label",{class:"label",for:"fileUpload"},null,-1)),i("input",{class:"fileInput",type:"file",id:"fileUpload",onChange:L,accept:"image/*"},null,32),n(c)||n(l).img?(u(),a("img",{key:0,src:n(c)||n(l).img},null,8,W)):(u(),a("div",X,"Добавить картинку"))])]),i("div",Y,[n(e)?(u(),E(n(j),{key:0,editor:n(e)},null,8,["editor"])):k("",!0),i("div",null,[t[40]||(t[40]=i("p",null,[i("b",null,"Стили редактирования")],-1)),n(e)?(u(),a("div",Z,[i("button",{onClick:t[5]||(t[5]=o=>n(e).chain().focus().toggleBold().run()),disabled:!n(e).can().chain().focus().toggleBold().run(),class:s({"is-active":n(e).isActive("bold")})},"жирный",10,h),i("button",{onClick:t[6]||(t[6]=o=>n(e).chain().focus().toggleItalic().run()),disabled:!n(e).can().chain().focus().toggleItalic().run(),class:s({"is-active":n(e).isActive("italic")})},"курсив",10,_),i("button",{onClick:t[7]||(t[7]=o=>n(e).chain().focus().toggleStrike().run()),disabled:!n(e).can().chain().focus().toggleStrike().run(),class:s({"is-active":n(e).isActive("strike")})},"перечёркнутый",10,tt),i("button",{onClick:t[8]||(t[8]=o=>n(e).chain().focus().toggleHeading({level:2}).run()),class:s({"is-active":n(e).isActive("heading",{level:2})})},"h2",2),i("button",{onClick:t[9]||(t[9]=o=>n(e).chain().focus().toggleHeading({level:3}).run()),class:s({"is-active":n(e).isActive("heading",{level:3})})},"h3",2),i("button",{onClick:t[10]||(t[10]=o=>n(e).chain().focus().toggleHeading({level:4}).run()),class:s({"is-active":n(e).isActive("heading",{level:4})})},"h4",2),i("button",{onClick:t[11]||(t[11]=o=>n(e).chain().focus().toggleHeading({level:5}).run()),class:s({"is-active":n(e).isActive("heading",{level:5})})},"h5",2),i("button",{onClick:t[12]||(t[12]=o=>n(e).chain().focus().toggleHeading({level:6}).run()),class:s({"is-active":n(e).isActive("heading",{level:6})})},"h6",2),i("button",{onClick:t[13]||(t[13]=o=>n(e).chain().focus().toggleBulletList().run()),class:s({"is-active":n(e).isActive("bulletList")})},"маркированный список",2),i("button",{onClick:t[14]||(t[14]=o=>n(e).chain().focus().toggleOrderedList().run()),class:s({"is-active":n(e).isActive("orderedList")})},"упорядоченный список",2),i("button",{onClick:t[15]||(t[15]=o=>n(e).chain().focus().toggleCodeBlock().run()),class:s({"is-active":n(e).isActive("codeBlock")})},"выделить параграф",2),i("button",{onClick:t[16]||(t[16]=o=>n(e).chain().focus().setHorizontalRule().run())},"скрыть абзац"),i("button",{onClick:t[17]||(t[17]=o=>n(e).chain().focus().setHardBreak().run())},"удалить"),i("button",{onClick:t[18]||(t[18]=o=>n(e).chain().focus().undo().run()),disabled:!n(e).can().chain().focus().undo().run()},"отменить изменение",8,nt),i("button",{onClick:t[19]||(t[19]=o=>n(e).chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run())},"вставить таблицу"),i("button",{onClick:t[20]||(t[20]=o=>n(e).chain().focus().addColumnBefore().run())},"добавить столбец перед"),i("button",{onClick:t[21]||(t[21]=o=>n(e).chain().focus().addColumnAfter().run())},"добавить столбец после"),i("button",{onClick:t[22]||(t[22]=o=>n(e).chain().focus().deleteColumn().run())},"удалить столбец"),i("button",{onClick:t[23]||(t[23]=o=>n(e).chain().focus().addRowBefore().run())},"добавить строку перед"),i("button",{onClick:t[24]||(t[24]=o=>n(e).chain().focus().addRowAfter().run())},"добавить строку после"),i("button",{onClick:t[25]||(t[25]=o=>n(e).chain().focus().deleteRow().run())},"удалить строку"),i("button",{onClick:t[26]||(t[26]=o=>n(e).chain().focus().deleteTable().run())},"удалить таблицу"),i("button",{onClick:t[27]||(t[27]=o=>n(e).chain().focus().mergeCells().run())},"объединить ячейки"),i("button",{onClick:t[28]||(t[28]=o=>n(e).chain().focus().splitCell().run())},"разделить ячейки"),i("button",{onClick:t[29]||(t[29]=o=>n(e).chain().focus().toggleHeaderColumn().run())},"переключение столбца заголовка"),i("button",{onClick:t[30]||(t[30]=o=>n(e).chain().focus().toggleHeaderRow().run())},"переключение строки заголовка"),i("button",{onClick:t[31]||(t[31]=o=>n(e).chain().focus().toggleHeaderCell().run())},"переключить ячейку заголовка"),i("button",{onClick:t[32]||(t[32]=o=>n(e).chain().focus().mergeOrSplit().run())},"слияние или разделение"),i("button",{onClick:t[33]||(t[33]=o=>n(e).chain().focus().fixTables().run())},"редактирование текста таблицы"),i("button",{onClick:t[34]||(t[34]=o=>n(e).chain().focus().goToNextCell().run())},"перейти к следующей ячейке"),i("button",{onClick:t[35]||(t[35]=o=>n(e).chain().focus().goToPreviousCell().run())},"перейти к предыдущей ячейке")])):k("",!0)])]),i("button",{onClick:R,class:"button-save"},"сохранить изменения")],64)}}}),rt=G(et,[["__scopeId","data-v-938812f8"]]);export{rt as default};
