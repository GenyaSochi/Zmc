import{_}from"./B2Ce7stt.js";import{g as x,r as c,c as u,b as U,a as o,w as k,A as r,B as i,m as n,F as C,K as V,o as m}from"#entry";import{_ as b}from"./DlAUqK2U.js";import"./D81k5HQH.js";const j={class:"editing-projects"},w={style:{position:"relative"}},h=["src"],I={key:1},A=x({__name:"create",setup(B){const t=c({});let l;const p=c(null),f=s=>{const e=s.target;if(l=Array.from(e.files)||[],l.length){const d=l[0],a=new FileReader;a.onload=v=>{p.value=v.target?.result},a.readAsDataURL(d)}},g=()=>{const s=parseInt(t.value.year.toString());if(!s){alert("Неверно указан год");return}if(!l?.length){alert("Добавьте фото");return}t.value.project=t.value.name,t.value.year=s;const e=new FormData;l?.length&&e.append("img",l[0]),e.append("data",JSON.stringify(t.value)),$fetch("/api/projects",{method:"POST",body:e}),V("/lk/projects")},y=()=>{};return(s,e)=>{const d=_;return m(),u(C,null,[U(d,null,{top:k(()=>e[5]||(e[5]=[o("h1",{class:"edit-proj"},"Редактировать проект",-1)])),_:1}),o("div",j,[r(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n(t).name=a),placeholder:"name"},null,512),[[i,n(t).name]]),o("div",w,[e[6]||(e[6]=o("label",{class:"label",for:"fileUpload"},null,-1)),o("input",{class:"fileInput",type:"file",id:"fileUpload",onChange:f,accept:"image/*"},null,32),n(p)||n(t).img?(m(),u("img",{key:0,src:n(p)||n(t).img},null,8,h)):(m(),u("div",I,"Добавить картинку")),o("div",{onClick:y},"Удалить картинку")]),r(o("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>n(t).quantity=a),placeholder:"quant"},null,512),[[i,n(t).quantity]]),r(o("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>n(t).year=a),placeholder:"year"},null,512),[[i,n(t).year]]),r(o("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>n(t).enduser=a),placeholder:"end"},null,512),[[i,n(t).enduser]]),r(o("textarea",{"onUpdate:modelValue":e[4]||(e[4]=a=>n(t).description=a)},null,512),[[i,n(t).description]]),o("button",{onClick:g,class:"button-save"},"Сохранить изменения")])],64)}}}),S=b(A,[["__scopeId","data-v-f568a5d8"]]);export{S as default};
