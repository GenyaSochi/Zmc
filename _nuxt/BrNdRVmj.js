import{_ as b}from"./D81k5HQH.js";import{_ as j}from"./DFxEcmNu.js";import{g as U,J as w,j as C,r as V,c as k,b as _,a as n,w as c,A as r,B as i,m as o,F as A,o as I,d as N,K as B}from"#entry";import{_ as F}from"./DlAUqK2U.js";const T={class:"editing-projects"},D={style:{position:"relative"}},R=["src"],$=U({__name:"[id]",async setup(q){let p,f;const g=w(),e=([p,f]=C(()=>$fetch("/api/projects/by_id/"+g.params.id)),p=await p,f(),p);let s;const d=V(null),y=l=>{const t=l.target;if(s=Array.from(t.files)||[],s.length){const m=s[0],u=new FileReader;u.onload=a=>{d.value=a.target?.result},u.readAsDataURL(m)}},x=()=>{d.value&&(d.value=""),s=[]},v=()=>{const l=parseInt(e.year.toString());if(!l){alert("Неверно указан год");return}e.project=e.name,e.year=l;const t=new FormData;s?.length&&t.append("img",s[0]),t.append("data",JSON.stringify(e)),$fetch("/api/projects",{method:"PUT",body:t}),B("/lk/projects")};return(l,t)=>{const m=b,u=j;return I(),k(A,null,[_(u,null,{top:c(()=>t[5]||(t[5]=[n("h1",{class:"edit-proj"},"Редактировать проект",-1)])),default:c(()=>[_(m,{to:"/lk/projects/create",class:"btn"},{default:c(()=>t[6]||(t[6]=[N("Добавить")])),_:1}),n("button",{onClick:v,class:"btn"},"Сохранить изменения"),n("button",{onClick:x,class:"btn"},"Удалить")]),_:1}),n("div",T,[r(n("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>o(e).name=a)},null,512),[[i,o(e).name]]),n("div",D,[t[7]||(t[7]=n("label",{class:"label",for:"fileUpload"},null,-1)),n("input",{class:"fileInput",type:"file",id:"fileUpload",onChange:y,accept:"image/*"},null,32),n("img",{src:o(d)||o(e).img},null,8,R)]),r(n("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=a=>o(e).quantity=a)},null,512),[[i,o(e).quantity]]),r(n("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=a=>o(e).year=a)},null,512),[[i,o(e).year]]),r(n("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=a=>o(e).enduser=a)},null,512),[[i,o(e).enduser]]),r(n("textarea",{"onUpdate:modelValue":t[4]||(t[4]=a=>o(e).description=a)},null,512),[[i,o(e).description]])])],64)}}}),E=F($,[["__scopeId","data-v-f50e965a"]]);export{E as default};
