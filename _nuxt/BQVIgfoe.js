import{_ as I}from"./D81k5HQH.js";import{_ as N}from"./DFxEcmNu.js";import{g as S,r as m,j as M,k as z,a6 as D,c as a,b as y,a as i,w as C,A as c,z as p,B as A,m as n,a7 as x,F as k,n as w,d as B,H as E,C as s,o as u,t as H,K as F}from"#entry";import{E as O,i as K,T as P,a as j}from"./BPWX74TS.js";import{_ as J}from"./DlAUqK2U.js";const q={class:"info-style"},G=["value"],Q=["value"],W={class:"img-style"},X=["src"],Y={class:"info-text"},Z={key:0,class:"info-editor"},h=["disabled"],_=["disabled"],tt=["disabled"],nt=["disabled"],et=S({__name:"create",async setup(ot){let f,$;const l=m({}),T=()=>{v.value&&(v.value=""),r=[]},{type:L,out:R}=([f,$]=M(()=>$fetch("/api/products/params")),f=await f,$(),f),e=m(null);z(()=>{e.value=new O({extensions:[K,P.configure({table:{resizable:!0}})],content:""})}),D(()=>{e.value?.destroy()});let r;const v=m(null),U=d=>{const t=d.target;if(r=Array.from(t.files)||[],r.length){const b=r[0],g=new FileReader;g.onload=o=>{v.value=o.target?.result},g.readAsDataURL(b)}},V=()=>{l.value.html=e.value.getHTML();const d=new FormData;r?.length&&d.append("img",r[0]),d.append("data",JSON.stringify(l.value)),$fetch("/api/products",{method:"POST",body:d}),F("/lk/products")};return(d,t)=>{const b=I,g=N;return u(),a(k,null,[y(g,null,{top:C(()=>t[36]||(t[36]=[i("h1",{class:"edit-prod"},"Редактировать продукт",-1)])),default:C(()=>[y(b,{to:"/lk/products/create",class:"btn"},{default:C(()=>t[37]||(t[37]=[B("Добавить")])),_:1}),i("button",{onClick:V,class:"btn"},"Сохранить изменения")]),_:1}),i("div",q,[c(i("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>n(l).name=o),class:"info-prod",placeholder:"имя"},null,512),[[A,n(l).name]]),c(i("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>n(l).title=o),class:"info-prod",placeholder:"название продукта"},null,512),[[A,n(l).title]]),c(i("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>n(l).type_id=o),onChange:t[3]||(t[3]=o=>n(l).out_id=null),class:"info-prod"},[(u(!0),a(k,null,w(n(L),o=>(u(),a("option",{key:o.id,value:o.id,class:"info-prod"},H(o.name),9,G))),128))],544),[[x,n(l).type_id]]),n(l).type_id==4?c((u(),a("select",{key:0,"onUpdate:modelValue":t[4]||(t[4]=o=>n(l).out_id=o),class:"info-prod"},[t[38]||(t[38]=i("option",{value:null},"Без номера выпуска",-1)),(u(!0),a(k,null,w(n(R),o=>(u(),a("option",{key:o.id,value:o.id},H(o.name),9,Q))),128))],512)),[[x,n(l).out_id]]):p("",!0),i("div",W,[t[39]||(t[39]=i("label",{class:"label",for:"fileUpload"},null,-1)),i("input",{class:"fileInput",type:"file",id:"fileUpload",onChange:U,accept:"image/*"},null,32),n(v)||n(l).img?(u(),a("img",{key:0,src:n(v)||n(l).img},null,8,X)):p("",!0),t[40]||(t[40]=B(" добавить картинку "))]),i("button",{onClick:T,class:"delImg"},"удалить картинку")]),i("div",Y,[n(e)?(u(),E(n(j),{key:0,editor:n(e)},null,8,["editor"])):p("",!0),i("div",null,[t[41]||(t[41]=i("p",null,[i("b",null,"Стили редактирования")],-1)),n(e)?(u(),a("div",Z,[i("button",{onClick:t[5]||(t[5]=o=>n(e).chain().focus().toggleBold().run()),disabled:!n(e).can().chain().focus().toggleBold().run(),class:s({"is-active":n(e).isActive("bold")})},"жирный",10,h),i("button",{onClick:t[6]||(t[6]=o=>n(e).chain().focus().toggleItalic().run()),disabled:!n(e).can().chain().focus().toggleItalic().run(),class:s({"is-active":n(e).isActive("italic")})},"курсив",10,_),i("button",{onClick:t[7]||(t[7]=o=>n(e).chain().focus().toggleStrike().run()),disabled:!n(e).can().chain().focus().toggleStrike().run(),class:s({"is-active":n(e).isActive("strike")})},"перечёркнутый",10,tt),i("button",{onClick:t[8]||(t[8]=o=>n(e).chain().focus().toggleHeading({level:2}).run()),class:s({"is-active":n(e).isActive("heading",{level:2})})},"h2",2),i("button",{onClick:t[9]||(t[9]=o=>n(e).chain().focus().toggleHeading({level:3}).run()),class:s({"is-active":n(e).isActive("heading",{level:3})})},"h3",2),i("button",{onClick:t[10]||(t[10]=o=>n(e).chain().focus().toggleHeading({level:4}).run()),class:s({"is-active":n(e).isActive("heading",{level:4})})},"h4",2),i("button",{onClick:t[11]||(t[11]=o=>n(e).chain().focus().toggleHeading({level:5}).run()),class:s({"is-active":n(e).isActive("heading",{level:5})})},"h5",2),i("button",{onClick:t[12]||(t[12]=o=>n(e).chain().focus().toggleHeading({level:6}).run()),class:s({"is-active":n(e).isActive("heading",{level:6})})},"h6",2),i("button",{onClick:t[13]||(t[13]=o=>n(e).chain().focus().toggleBulletList().run()),class:s({"is-active":n(e).isActive("bulletList")})},"маркированный список",2),i("button",{onClick:t[14]||(t[14]=o=>n(e).chain().focus().toggleOrderedList().run()),class:s({"is-active":n(e).isActive("orderedList")})},"упорядоченный список",2),i("button",{onClick:t[15]||(t[15]=o=>n(e).chain().focus().toggleCodeBlock().run()),class:s({"is-active":n(e).isActive("codeBlock")})},"выделить параграф",2),i("button",{onClick:t[16]||(t[16]=o=>n(e).chain().focus().setHorizontalRule().run())},"скрыть абзац"),i("button",{onClick:t[17]||(t[17]=o=>n(e).chain().focus().setHardBreak().run())},"удалить"),i("button",{onClick:t[18]||(t[18]=o=>n(e).chain().focus().undo().run()),disabled:!n(e).can().chain().focus().undo().run()},"отменить изменение",8,nt),i("button",{onClick:t[19]||(t[19]=o=>n(e).chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run())},"вставить таблицу"),i("button",{onClick:t[20]||(t[20]=o=>n(e).chain().focus().addColumnBefore().run())},"добавить столбец перед"),i("button",{onClick:t[21]||(t[21]=o=>n(e).chain().focus().addColumnAfter().run())},"добавить столбец после"),i("button",{onClick:t[22]||(t[22]=o=>n(e).chain().focus().deleteColumn().run())},"удалить столбец"),i("button",{onClick:t[23]||(t[23]=o=>n(e).chain().focus().addRowBefore().run())},"добавить строку перед"),i("button",{onClick:t[24]||(t[24]=o=>n(e).chain().focus().addRowAfter().run())},"добавить строку после"),i("button",{onClick:t[25]||(t[25]=o=>n(e).chain().focus().deleteRow().run())},"удалить строку"),i("button",{onClick:t[26]||(t[26]=o=>n(e).chain().focus().deleteTable().run())},"удалить таблицу"),i("button",{onClick:t[27]||(t[27]=o=>n(e).chain().focus().mergeCells().run())},"объединить ячейки"),i("button",{onClick:t[28]||(t[28]=o=>n(e).chain().focus().splitCell().run())},"разделить ячейки"),i("button",{onClick:t[29]||(t[29]=o=>n(e).chain().focus().toggleHeaderColumn().run())},"переключение столбца заголовка"),i("button",{onClick:t[30]||(t[30]=o=>n(e).chain().focus().toggleHeaderRow().run())},"переключение строки заголовка"),i("button",{onClick:t[31]||(t[31]=o=>n(e).chain().focus().toggleHeaderCell().run())},"переключить ячейку заголовка"),i("button",{onClick:t[32]||(t[32]=o=>n(e).chain().focus().mergeOrSplit().run())},"слияние или разделение"),i("button",{onClick:t[33]||(t[33]=o=>n(e).chain().focus().fixTables().run())},"редактирование текста таблицы"),i("button",{onClick:t[34]||(t[34]=o=>n(e).chain().focus().goToNextCell().run())},"перейти к следующей ячейке"),i("button",{onClick:t[35]||(t[35]=o=>n(e).chain().focus().goToPreviousCell().run())},"перейти к предыдущей ячейке")])):p("",!0)])])],64)}}}),rt=J(et,[["__scopeId","data-v-f51f4e38"]]);export{rt as default};
