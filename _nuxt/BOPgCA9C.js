import{_ as v}from"./Cw9VPy-r.js";import{g as _,m as c,c as u,b as x,a as o,w as b,A as r,B as i,l as n,F as U,I as V,o as m}from"#entry";import{_ as j}from"./DlAUqK2U.js";import"./6LGwUj7w.js";const k={class:"editing-projects"},w={style:{position:"relative"}},C=["src"],h={key:1},I=_({__name:"create",setup(A){const t=c({});let l;const p=c(null),f=s=>{const e=s.target;if(l=Array.from(e.files)||[],l.length){const d=l[0],a=new FileReader;a.onload=y=>{p.value=y.target?.result},a.readAsDataURL(d)}},g=()=>{const s=parseInt(t.value.year.toString());if(!s){alert("Неверно указан год");return}if(!l?.length){alert("Добавьте фото");return}t.value.project=t.value.name,t.value.year=s;const e=new FormData;l?.length&&e.append("img",l[0]),e.append("data",JSON.stringify(t.value)),$fetch("/api/projects",{method:"POST",body:e}),V("/lk/projects")};return(s,e)=>{const d=v;return m(),u(U,null,[x(d,null,{top:b(()=>e[5]||(e[5]=[o("h1",{class:"edit-proj"},"Редактировать проект",-1)])),_:1}),o("div",k,[r(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n(t).name=a),placeholder:"name"},null,512),[[i,n(t).name]]),o("div",w,[e[6]||(e[6]=o("label",{class:"label",for:"fileUpload"},null,-1)),o("input",{class:"fileInput",type:"file",id:"fileUpload",onChange:f,accept:"image/*"},null,32),n(p)||n(t).img?(m(),u("img",{key:0,src:n(p)||n(t).img},null,8,C)):(m(),u("div",h,"Добавить картинку"))]),r(o("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>n(t).quantity=a),placeholder:"quant"},null,512),[[i,n(t).quantity]]),r(o("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>n(t).year=a),placeholder:"year"},null,512),[[i,n(t).year]]),r(o("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>n(t).enduser=a),placeholder:"end"},null,512),[[i,n(t).enduser]]),r(o("textarea",{"onUpdate:modelValue":e[4]||(e[4]=a=>n(t).description=a)},null,512),[[i,n(t).description]]),o("button",{onClick:g,class:"button-save"},"Сохранить изменения")])],64)}}}),N=j(I,[["__scopeId","data-v-b28b4be9"]]);export{N as default};
