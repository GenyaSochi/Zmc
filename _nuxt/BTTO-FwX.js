import{_ as I}from"./BIRqQLeT.js";import{_ as M}from"./CggPUQG3.js";import{g as S,r as b,N as E,j as z,k as D,z as F,c as a,b as w,a as i,w as m,G as c,E as C,H as x,m as n,a9 as A,F as k,n as B,M as O,I as s,o as u,d as P,t as H}from"#entry";import{E as j,i as G,T as J,a as K}from"./B4tRxEfj.js";import{_ as q}from"./DlAUqK2U.js";const Q={class:"info-style"},W=["value"],X=["value"],Y={class:"img-style"},Z=["src"],h={class:"info-text"},_={key:0,class:"info-editor"},tt=["disabled"],nt=["disabled"],et=["disabled"],ot=["disabled"],it=S({__name:"[id]",async setup(lt){let v,$;const g=b(!1),T=E(),{product:l,type:R,out:U}=([v,$]=z(()=>$fetch("/api/products/by_id/"+T.params.id)),v=await v,$(),v),L=()=>{g.value=!1,l.out_id=null,l.type_id==4&&(g.value=!0)},e=b(null);D(()=>{e.value=new j({extensions:[G,J.configure({table:{resizable:!0}})],content:l.html})}),F(()=>{e.value?.destroy()});let d;const y=b(null),N=r=>{const t=r.target;if(d=Array.from(t.files)||[],d.length){const p=d[0],f=new FileReader;f.onload=o=>{y.value=o.target?.result},f.readAsDataURL(p)}},V=()=>{l.html=e.value.getHTML();const r=new FormData;d?.length&&r.append("img",d[0]),r.append("data",JSON.stringify(l)),$fetch("/api/products",{method:"PUT",body:r})};return(r,t)=>{const p=I,f=M;return u(),a(k,null,[w(f,null,{top:m(()=>t[35]||(t[35]=[i("h1",{class:"edit-prod"},"Редактировать продукт",-1)])),default:m(()=>[w(p,{to:"/lk/products/create",class:"btn"},{default:m(()=>t[36]||(t[36]=[P("Добавить")])),_:1})]),_:1}),i("div",Q,[c(i("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>n(l).name=o),class:"info-prod"},null,512),[[x,n(l).name]]),c(i("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>n(l).title=o),class:"info-prod"},null,512),[[x,n(l).title]]),c(i("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>n(l).type_id=o),onChange:L,class:"info-prod"},[(u(!0),a(k,null,B(n(R),o=>(u(),a("option",{key:o.id,value:o.id,class:"info-prod"},H(o.name),9,W))),128))],544),[[A,n(l).type_id]]),n(g)?c((u(),a("select",{key:0,"onUpdate:modelValue":t[3]||(t[3]=o=>n(l).out_id=o),class:"info-prod"},[t[37]||(t[37]=i("option",{value:null},"Без номера выпуска",-1)),(u(!0),a(k,null,B(n(U),o=>(u(),a("option",{key:o.id,value:o.id},H(o.name),9,X))),128))],512)),[[A,n(l).out_id]]):C("",!0),i("div",Y,[t[38]||(t[38]=i("label",{class:"label",for:"fileUpload"},null,-1)),i("input",{class:"fileInput",type:"file",id:"fileUpload",onChange:N,accept:"image/*"},null,32),i("img",{src:n(y)||n(l).img},null,8,Z)])]),i("div",h,[n(e)?(u(),O(n(K),{key:0,editor:n(e)},null,8,["editor"])):C("",!0),i("div",null,[t[39]||(t[39]=i("p",null,[i("b",null,"Стили редактирования")],-1)),n(e)?(u(),a("div",_,[i("button",{onClick:t[4]||(t[4]=o=>n(e).chain().focus().toggleBold().run()),disabled:!n(e).can().chain().focus().toggleBold().run(),class:s({"is-active":n(e).isActive("bold")})},"жирный",10,tt),i("button",{onClick:t[5]||(t[5]=o=>n(e).chain().focus().toggleItalic().run()),disabled:!n(e).can().chain().focus().toggleItalic().run(),class:s({"is-active":n(e).isActive("italic")})},"курсив",10,nt),i("button",{onClick:t[6]||(t[6]=o=>n(e).chain().focus().toggleStrike().run()),disabled:!n(e).can().chain().focus().toggleStrike().run(),class:s({"is-active":n(e).isActive("strike")})},"перечёркнутый",10,et),i("button",{onClick:t[7]||(t[7]=o=>n(e).chain().focus().toggleHeading({level:2}).run()),class:s({"is-active":n(e).isActive("heading",{level:2})})},"h2",2),i("button",{onClick:t[8]||(t[8]=o=>n(e).chain().focus().toggleHeading({level:3}).run()),class:s({"is-active":n(e).isActive("heading",{level:3})})},"h3",2),i("button",{onClick:t[9]||(t[9]=o=>n(e).chain().focus().toggleHeading({level:4}).run()),class:s({"is-active":n(e).isActive("heading",{level:4})})},"h4",2),i("button",{onClick:t[10]||(t[10]=o=>n(e).chain().focus().toggleHeading({level:5}).run()),class:s({"is-active":n(e).isActive("heading",{level:5})})},"h5",2),i("button",{onClick:t[11]||(t[11]=o=>n(e).chain().focus().toggleHeading({level:6}).run()),class:s({"is-active":n(e).isActive("heading",{level:6})})},"h6",2),i("button",{onClick:t[12]||(t[12]=o=>n(e).chain().focus().toggleBulletList().run()),class:s({"is-active":n(e).isActive("bulletList")})},"маркированный список",2),i("button",{onClick:t[13]||(t[13]=o=>n(e).chain().focus().toggleOrderedList().run()),class:s({"is-active":n(e).isActive("orderedList")})},"упорядоченный список",2),i("button",{onClick:t[14]||(t[14]=o=>n(e).chain().focus().toggleCodeBlock().run()),class:s({"is-active":n(e).isActive("codeBlock")})},"выделить параграф",2),i("button",{onClick:t[15]||(t[15]=o=>n(e).chain().focus().setHorizontalRule().run())},"скрыть абзац"),i("button",{onClick:t[16]||(t[16]=o=>n(e).chain().focus().setHardBreak().run())},"удалить"),i("button",{onClick:t[17]||(t[17]=o=>n(e).chain().focus().undo().run()),disabled:!n(e).can().chain().focus().undo().run()},"отменить изменение",8,ot),i("button",{onClick:t[18]||(t[18]=o=>n(e).chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run())},"вставить таблицу"),i("button",{onClick:t[19]||(t[19]=o=>n(e).chain().focus().addColumnBefore().run())},"добавить столбец перед"),i("button",{onClick:t[20]||(t[20]=o=>n(e).chain().focus().addColumnAfter().run())},"добавить столбец после"),i("button",{onClick:t[21]||(t[21]=o=>n(e).chain().focus().deleteColumn().run())},"удалить столбец"),i("button",{onClick:t[22]||(t[22]=o=>n(e).chain().focus().addRowBefore().run())},"добавить строку перед"),i("button",{onClick:t[23]||(t[23]=o=>n(e).chain().focus().addRowAfter().run())},"добавить строку после"),i("button",{onClick:t[24]||(t[24]=o=>n(e).chain().focus().deleteRow().run())},"удалить строку"),i("button",{onClick:t[25]||(t[25]=o=>n(e).chain().focus().deleteTable().run())},"удалить таблицу"),i("button",{onClick:t[26]||(t[26]=o=>n(e).chain().focus().mergeCells().run())},"объединить ячейки"),i("button",{onClick:t[27]||(t[27]=o=>n(e).chain().focus().splitCell().run())},"разделить ячейки"),i("button",{onClick:t[28]||(t[28]=o=>n(e).chain().focus().toggleHeaderColumn().run())},"переключение столбца заголовка"),i("button",{onClick:t[29]||(t[29]=o=>n(e).chain().focus().toggleHeaderRow().run())},"переключение строки заголовка"),i("button",{onClick:t[30]||(t[30]=o=>n(e).chain().focus().toggleHeaderCell().run())},"переключить ячейку заголовка"),i("button",{onClick:t[31]||(t[31]=o=>n(e).chain().focus().mergeOrSplit().run())},"слияние или разделение"),i("button",{onClick:t[32]||(t[32]=o=>n(e).chain().focus().fixTables().run())},"редактирование текста таблицы"),i("button",{onClick:t[33]||(t[33]=o=>n(e).chain().focus().goToNextCell().run())},"перейти к следующей ячейке"),i("button",{onClick:t[34]||(t[34]=o=>n(e).chain().focus().goToPreviousCell().run())},"перейти к предыдущей ячейке")])):C("",!0)])]),i("button",{onClick:V,class:"button-save"},"сохранить изменения")],64)}}}),vt=q(it,[["__scopeId","data-v-c6909127"]]);export{vt as default};
