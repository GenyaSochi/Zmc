import{_}from"./DFxEcmNu.js";import{g as b,r as c,c as u,b as U,a as l,w as f,A as i,B as p,m as a,d as V,F as k,o as m,K as C}from"#entry";import{_ as I}from"./DlAUqK2U.js";import"./D81k5HQH.js";const j={class:"editing-projects"},w=["src"],A={key:1,class:"addImg"},B=b({__name:"create",setup(F){const t=c({});let o;const s=c(null),g=r=>{const e=r.target;if(o=Array.from(e.files)||[],o.length){const d=o[0],n=new FileReader;n.onload=x=>{s.value=x.target?.result},n.readAsDataURL(d)}},v=()=>{const r=parseInt(t.value.year.toString());if(!r){alert("Неверно указан год");return}if(!o?.length){alert("Добавьте фото");return}t.value.project=t.value.name,t.value.year=r;const e=new FormData;o?.length&&e.append("img",o[0]),e.append("data",JSON.stringify(t.value)),$fetch("/api/projects",{method:"POST",body:e}),C("/lk/projects")},y=()=>{s.value&&(s.value=""),o=[]};return(r,e)=>{const d=_;return m(),u(k,null,[U(d,null,{top:f(()=>e[5]||(e[5]=[l("h1",{class:"edit-proj"},"Редактировать проект",-1)])),default:f(()=>[l("button",{onClick:v,class:"button-save"},"Сохранить изменения")]),_:1}),l("div",j,[i(l("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>a(t).name=n),placeholder:"имя"},null,512),[[p,a(t).name]]),a(s)||a(t).img?(m(),u("img",{key:0,src:a(s)||a(t).img},null,8,w)):(m(),u("div",A,[e[6]||(e[6]=l("label",{class:"label",for:"fileUpload"},null,-1)),l("input",{class:"fileInput",type:"file",id:"fileUpload",onChange:g,accept:"image/*"},null,32),e[7]||(e[7]=V(" Добавить картинку "))])),l("button",{onClick:y,class:"delImg"},"Удалить картинку"),i(l("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=n=>a(t).quantity=n),placeholder:"количество"},null,512),[[p,a(t).quantity]]),i(l("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=n=>a(t).year=n),placeholder:"год"},null,512),[[p,a(t).year]]),i(l("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=n=>a(t).enduser=n),placeholder:"конечный потребитель"},null,512),[[p,a(t).enduser]]),i(l("textarea",{"onUpdate:modelValue":e[4]||(e[4]=n=>a(t).description=n)},null,512),[[p,a(t).description]])])],64)}}}),h=I(B,[["__scopeId","data-v-bdaf775c"]]);export{h as default};
