import{_ as b}from"./BIRqQLeT.js";import{_ as v}from"./CggPUQG3.js";import{g as j,N as U,j as w,r as C,c as V,b as _,a as n,w as m,G as r,H as i,m as o,F as k,o as N,d as A,O as F}from"#entry";import{_ as I}from"./DlAUqK2U.js";const T={class:"editing-projects"},B={style:{position:"relative"}},D=["src"],R=j({__name:"[id]",async setup($){let p,c;const y=U(),e=([p,c]=w(()=>$fetch("/api/projects/by_id/"+y.params.id)),p=await p,c(),p);let s;const f=C(null),g=l=>{const t=l.target;if(s=Array.from(t.files)||[],s.length){const u=s[0],d=new FileReader;d.onload=a=>{f.value=a.target?.result},d.readAsDataURL(u)}},x=()=>{const l=parseInt(e.year.toString());if(!l){alert("Неверно указан год");return}e.project=e.name,e.year=l;const t=new FormData;s?.length&&t.append("img",s[0]),t.append("data",JSON.stringify(e)),$fetch("/api/projects",{method:"PUT",body:t}),F("/lk/projects")};return(l,t)=>{const u=b,d=v;return N(),V(k,null,[_(d,null,{top:m(()=>t[6]||(t[6]=[n("h1",{class:"edit-proj"},"Редактировать проект",-1)])),default:m(()=>[_(u,{to:"/lk/projects/create",class:"btn"},{default:m(()=>t[7]||(t[7]=[A("Добавить")])),_:1}),n("button",{onClick:x,class:"btn"},"Сохранить изменения"),n("button",{onClick:t[0]||(t[0]=()=>{}),class:"btn"},"Удалить")]),_:1}),n("div",T,[r(n("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=a=>o(e).name=a)},null,512),[[i,o(e).name]]),n("div",B,[t[8]||(t[8]=n("label",{class:"label",for:"fileUpload"},null,-1)),n("input",{class:"fileInput",type:"file",id:"fileUpload",onChange:g,accept:"image/*"},null,32),n("img",{src:o(f)||o(e).img},null,8,D)]),r(n("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=a=>o(e).quantity=a)},null,512),[[i,o(e).quantity]]),r(n("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=a=>o(e).year=a)},null,512),[[i,o(e).year]]),r(n("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=a=>o(e).enduser=a)},null,512),[[i,o(e).enduser]]),r(n("textarea",{"onUpdate:modelValue":t[5]||(t[5]=a=>o(e).description=a)},null,512),[[i,o(e).description]])])],64)}}}),S=I(R,[["__scopeId","data-v-07ca5242"]]);export{S as default};
